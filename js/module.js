"use strict";Vue.component("v-left-menu",{template:'\n        <div id="leftMenu" class="r12-2-menu">\n            <div class="left-menu-box">\n                <a v-for="(left,index) in menus" class="left-menu-box-a" v-bind:href="left.url" :class=\'{active:current==index}\'>\n                    <span v-bind:class="left.Class" class=\'left-menu-box-span\'></span>\n                    {{left.name}}\n                </a>\n                <div class="leftBox_img">\n                    <img src="../img/article1.png" alt="">\n                    <p>新手一个月利用标题优化引爆免费流量</p>\n                    <img src="../img/article4.png" alt="">\n                    <p>90天产品经理养成计划</p>\n                </div>\n            </div>\n        </div>\n    ',data:function(){return{current:0,menus:[{name:"运营预警",Class:"operate_png",url:"operationAI.html"},{name:"管理跟踪",Class:"manage_png",url:"#"},{name:"爆款计划",Class:"hot_png",url:"#"},{name:"促销管理",Class:"sales_png",url:"#"},{name:"量测学院",Class:"school_png",url:"#"}]}},created:function(){for(var n=window.location.href,e=0;e<this.menus.length;e++)n.indexOf(this.menus[e].url)>-1&&(this.current=e)}}),Vue.component("v-operate-top-table",{template:'\n                <div>\n                    <div class="b1">\n                        <table class="operationAI_tab_1">\n                            <tbody>\n                                <template v-for=\'(li,index) in tableTop\'>\n                                    <tr class="operateAI_board_table_title">\n                                        <td>跟踪项目</td>\n                                        <td v-for=\'l in li\'>{{l.target,index}}\n                                            <div></div>\n                                        </td>\n                                        <td rowspan="2" class="character_box" v-bind:class="bgColor(index)">{{text(index)}}</td>\n                                    </tr>\n                                    <tr>\n                                        <td>数值（环比）</td>\n                                        <td v-for="(l,index) in li">\n                                            <p v-bind:title="l.value">{{l.value}}</p>\n                                            <h2><img :src="imgSrc(l.rank)" alt=""></h2>\n                                        </td>\n                                    </tr>\n                                </template>\n                            </tbody>\n                        </table>\n                    </div>\n                    <div class="b1"></div>\n                </div>\n            ',props:["tableTop"],methods:{imgSrc:function(n){var e=Number(n);return e<0?"../img/down.png":0==e?"../img/line.png":"../img/up.png"},bgColor:function(n){return 0==n?"flow_chara":1==n?"visitor_chara":2==n?"order_chara":3==n?"pay_chara":4==n?"over_chara":void 0},text:function(n){return 0==n?"流量特征":1==n?"访客特征":2==n?"下单特征":3==n?"支付特征":4==n?"完结特征":void 0}}}),Vue.component("v-main-warning-table",{template:'\n                <div class="clearfix">\n                    <div class="b1" style="position:relative;">\n                        <div>\n                            <v-adjust-form></v-adjust-form>\n                        </div>          \n                        <table id="bomb_table">\n                            <colgroup>\n                                <col width="37%">\n                                <col width="19%">\n                                <col width="14%">\n                                <col width="14%">\n                                <col width="16%">\n                            </colgroup>\n                            <tbody>\n                                <tr v-for=\'(li,index) in tableData\'>\n                                    <td>\n                                        <ul>\n                                            <li v-for=\'l in li.trend\'><img :src="bomb(li.rank)" alt=""></li> \n                                            <li v-for=\'m in (10-li.trend)\'><img :src="leftBomb(li.rank)" alt=""></li>                                  \n                                        </ul>                              \n                                    </td>\n                                    <td>\n                                        <p class="importParam">{{li.target}}</p>\n                                    </td>\n                                    <td>\n                                        <p class="todayValue">{{li.shopValue.today}}</p>\n                                    </td>\n                                    <td>\n                                        <p class="yestodayValue">{{li.shopValue.yesterday}}</p>\n                                    </td>\n                                    <td>\n                                        <button class="bomb_btn" @click=\'ignore($event,li.level,li.plid,li.target,index)\'>忽略掉</button>\n                                        <button class="bomb_btn" :class=\'{blackBomb_btn:btnColor(li.rank,li.trend)=="black",redBomb_btn:btnColor(li.rank,li.trend)==="red",orangeBomb_btn:btnColor(li.rank,li.trend)=="orange",}\' @click="goSlove(li.target,li.shopValue.today,li.shopValue.yesterday,li.plid,li.level,index)">去解决</button>\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>\n                    <div class="b1"></div>                                       \n                </div>       \n            ',props:["tableData","id","orignData"],methods:{bomb:function(n){return(n=Number(n))>=0?"../img/fackBomb.png":n<0&&n>-30?"../img/orangeBomb.png":n<=-30&&-70<n?"../img/redBomb.png":n<=-70?"../img/blackBomb.png":void 0},leftBomb:function(n){return 0<=(n=Number(n))?"../img/fackBomb.png":n<0&&-30<n?"../img/fackBomb.png":n<=-30&&-70<n?"../img/orangeBomb.png":n<=-70?"../img/redBomb.png":void 0},btnColor:function(n,e){return n<=-70?"black":n<=-30&&-70<n?"red":n<0&&n>-30?"orange":"grey"},goSlove:function(n,e,t,a,l,i){var s={id:this.id,current:1,t:n,today:e,yesterday:t,plid:a,level:l,before:this.orignData[i].shopValue.today};bus.$emit("target",s),$("#slove_fixed_box").show(),$(".fixed_box").show(),$(".plan_textArea").val("")},ignore:function(n,e,t,a,l){var i=[{sellerId:this.id,plIndex:a,pccontent:"忽略啦",pmname:"-",prioritynum:e,pccategory:"忽略掉",createid:1,enabled:!0,remark:"忽略掉",before:this.orignData[l].shopValue.today}];$.ajax({url:$api.addLog,type:"POST",data:JSON.stringify(i),dataType:"text",contentType:"application/json",async:!1,success:function(n){bus1.$emit("reflash",!0),bus1.$emit("reflashTable",!0)},error:function(n){console.log(n)}})}}}),Vue.component("v-adjust-form",{template:'\n            <div>\n                <div class="fixed_box"></div>\n                <div id="slove_fixed_box">\n                    <div class="slove_box_cont">\n                        <div class="delete_Btn" @click="cancle()"><img src="../img/删除筛选项 (1).png" alt=""></div>\n                        <div class="submit_success_box">\n                            <p>提交成功</p>\n                            <button class="sure_btn" @click="cancle()">确定</button>\n                        </div>\n                        <h1 class="slove_title">预警指标应急调整计划</h1>\n                        <div class="slove_content">\n                            <div class="slove_param">\n                                <p class="average_deep fl">{{target.t}}</p>\n                                <span class="alert_num fr">{{level}}级</span>\n                                <span class="slove_yesTodeyValue fr">{{target.yesterday}}</span>\n                                <span class="slove_todeyValue fr">{{target.today}}</span>\n                            </div>\n                            <ul class="manage_select_box">\n                                <li v-for=\'(li,index) in target.current\'>\n                                    <div class="top_select_box">\n                                        <label>调整计划{{index+1}}：</label>\n                                        \x3c!--<select class="strategy_select" style="margin-right:72px;">\n                                            <option v-for=\'li in selection(index)\'>{{li}}</option>\n                                        </select>--\x3e\n\n                                        <select class="strategy_select" style="margin-right:72px;" @change="select($event)">\n                                            <option v-for=\'li in selectData[index]\' :data-select=\'li.pccategory\'>{{li.pccontent}}</option>\n                                        </select>\n\n                                        <label>调整策略参考：</label>\n                                        \x3c!--<select class="manage_plan_select" v-model=\'current[index].selected\'>\n                                            <option>{{selectData[0].pccategory}}</option>                                          \n                                        </select>--\x3e\n\n                                        \x3c!--<select class="manage_plan_select">\n                                            <option>{{selected}}</option>                                          \n                                        </select>--\x3e\n                                        <span class="manage_plan_select fr">{{selected}}</span>\n                                    </div>\n                                    <textarea class="plan_textArea"></textarea>\n                                </li>\n                            </ul>\n                            <div class="add_plan_box">\n                                <label>计划发起人：</label>\n                                <select class="add_plan_select">\n                                    <option v-for=\'li in people\' :value=\'li.pmid\'>{{li.pmname}}</option>\n                                </select>\n                                <button class="add_plan_btn fr" @click=\'addPlan()\'>+增加计划</button>\n                            </div>\n                        </div>\n                        <div class="slove_bottom">\n                            <div class="slove_bottom_btn_box">\n                                <button class="sub_btn fr" @click="submit()">提交</button>\n                                <button class="clearing_btn fr" @click=\'cancle()\'>取消</button>\n                            </div>\n                        </div>\n                    </div>\n                </div>            \n            </div>     \n            ',data:function(){return{selectData:[],sellerId:"",num:1,target:{},people:[],optionData:[],selected:"",count:1,current:[{selected:""}],level:0,before:""}},created:function(){var n=this;bus.$on("target",function(e){n.sellerId=e.id,n.target=e,n.level=e.level,n.before=e.before;var t=e.plid,a=n;$.ajax({url:$api.plainContent,type:"POST",data:{plid:t},dataType:"json",async:!1,success:function(n){a.current=[{selected:""}],a.selectData.push(n),a.selected=n[0].pccategory},error:function(n){console.log(n)}})});var e=this;$.ajax({url:$api.plainMan,type:"POST",data:{},dataType:"json",success:function(n){e.people=n},error:function(n){console.log(n)}})},methods:{select:function(n){var e=$(n.target).find("option:selected").attr("data-select");$(n.target).siblings(".manage_plan_select").html(e)},addPlan:function(){++this.target.current,console.log(this.current),this.current.push({selected:"运营"}),this.selectData.push(this.selectData[0])},cancle:function(){$("#slove_fixed_box").hide(),$(".fixed_box").hide(),$("html,body").removeClass("ovfHiden"),$(".submit_success_box").hide()},submit:function(){for(var n=this,e=$(".average_deep").text(),t=($(".manage_plan_select").children("option:selected").text(),$(".strategy_select").children("option:selected").text(),$(".plan_textArea").val(),$(".add_plan_select").children("option:selected").text()),a=($(".slove_todeyValue").text(),parseInt($(".alert_num").text())),l=[],i=0;i<$(".manage_select_box>li").length;i++){var s=new function(){this.sellerId=n.sellerId,this.plIndex=e,this.pccontent="",this.pmname=t,this.prioritynum=a,this.pccategory="",this.createid=1,this.enabled=!0,this.remark="",this.before=n.before};s.remark=$(".manage_select_box>li").eq(i).find(".strategy_select").children("option:selected").text(),s.pccategory=$(".manage_select_box>li").eq(i).find(".manage_plan_select").text(),s.pccontent=$.trim($(".manage_select_box>li").eq(i).find(".plan_textArea").val()),""==s.pccontent&&(s.pccontent="忽略啦"),l.push(s)}$.ajax({url:$api.addLog,type:"POST",data:JSON.stringify(l),dataType:"text",contentType:"application/json",async:!1,success:function(n){$(".submit_success_box").show();bus1.$emit("reflash",!0),bus1.$emit("reflashTable",!0)},error:function(n){console.log(n)}})}}}),Vue.component("v-adjust-info",{template:'\n                <div>\n                    <div class="b1">\n                        <table id="arrangeDariy">\n                            <colgroup>\n                                <col width="5%">\n                                <col width="15%">\n                                <col width="10%">\n                                <col width="20%">\n                                <col width="10%">\n                                <col width="20%">\n                                <col width="10%">\n                                <col width="10%">\n                            </colgroup>\n                            <tbody>\n                                <tr>\n                                    <th>序号</th>\n                                    <th>待调整运营指标</th>\n                                    <th>预警级别</th>\n                                    <th>调整计划</th>\n                                    <th>操作人</th>\n                                    <th>时间</th>\n                                    <th>调整前</th>\n                                    <th>调整后</th>\n                                </tr>\n                                <tr v-for=\'(li,index) in tableData\'>\n                                    <td>\n                                        {{li.Count-Number(li.RowNumber)+1}}    \n                                    </td>\n                                    <td>\n                                        {{li.Pl_Index}}\n                                    </td>\n                                    <td>\n                                        {{level(li.PriorityNum)}}\n                                    </td>\n                                    <td>\n                                        {{li.PcContent}}\n                                    </td>\n                                    <td>\n                                        {{li.PmName}}\n                                    </td>\n                                    <td>\n                                        {{toData(li.CreateTime)}}    \n                                    </td>\n                                    <td>\n                                        {{fun(li.Pl_Index,li.Before)}}\n                                    </td>\n                                    <td>\n                                        {{fun(li.Pl_Index,li.After)}}\n                                    </td>\n                                </tr>\n                            </tbody>\n                        </table>\n                    </div>    \n                </div>\n            ',props:["tableData","pageno"],methods:{toData:function(n){return n.substring(0,n.length-2)},toNum:function(n){var e=Number(100*n).toFixed(1);return e+="%"},level:function(n){return n?n+"级":"0级"},fun:function(n,e){return void 0==e?"-":(n.indexOf("金额")>-1||n.indexOf("单价")>-1?e="￥"+Number(e).toFixed(2):n.indexOf("率")>-1||n.indexOf("占比")>-1?e=(100*e).toFixed(2)+"%":n.indexOf("数")>-1&&(e=Number(e).toFixed(0)),e)}}}),Vue.component("v-page",{template:'\n                <div class=\'b1\'> \n                    <div class="page">     \n                        <div class="page-box" >\n                            <div class="page-list">\n                                \x3c!--<span class="page-btn" @click="goto(1)">首页</span>--\x3e                      \n                                <span @click="gotoPre(current)" class="page-btn">\n                                    &lt;上一页\n                                </span>\n                                <span v-for="index in pages" @click="goto(index)" :class="{\'page-now\':current == index}" class="page-btn">\n                                    {{index}}\n                                </span>\n                                <span @click="gotoNext(current)" class="page-btn">\n                                    下一页&gt\n                                </span>\n                                \x3c!--<span class="page-btn" @click="goto(allpage)">尾页</span>--\x3e\n                            </div>\n                        </div>\n                    </div>                \n                </div>',data:function(){return{current:1,showItem:10}},props:["count","allpage","pageno"],computed:{pages:function(){var n=[];if(this.current<this.showItem)for(t=Math.min(this.showItem,this.allpage);t;)n.unshift(t--);else{var e=this.current-Math.floor(this.showItem/2),t=this.showItem;for(e>this.allpage-this.showItem&&(e=this.allpage-this.showItem+1);t--;)n.push(e++)}return n}},methods:{goto:function(n){this.current=n,this.pageno=n,this.$emit("pn",this.pageno)},gotoNext:function(n){n!=this.allpage&&(++n,this.current=n,this.pageno=n,this.$emit("pn",this.pageno))},gotoPre:function(n){"1"!=n&&(--n,this.current=n,this.pageno=n,this.$emit("pn",this.pageno))}}});